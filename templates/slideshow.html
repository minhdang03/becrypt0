<div class="swiper-container">
    <div class="swiper-wrapper">
        <!-- Các slide sẽ được thêm vào đây bởi JavaScript -->
    </div>
    <div class="swiper-pagination"></div>
</div>

<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const swiperWrapper = document.querySelector('.swiper-wrapper');

        fetch('/slideshow/get_random_image')
            .then(response => response.json())
            .then(data => {
                if (data.error) {
                    console.error('Lỗi khi tải ảnh slideshow:', data.error);
                    return;
                }

                swiperWrapper.innerHTML = '';
                
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                slide.innerHTML = `<img src="${data.url}" alt="${data.alt_text}" class="w-full h-full object-cover">`;
                swiperWrapper.appendChild(slide);

                new Swiper('.swiper-container', {
                    slidesPerView: 1,
                    spaceBetween: 30,
                    loop: true,
                    autoplay: {
                        delay: 5000,
                    },
                    effect: 'fade',
                    fadeEffect: {
                        crossFade: true
                    },
                    speed: 1000,
                    pagination: {
                        el: '.swiper-pagination',
                        clickable: true,
                    },
                });
            })
            .catch(error => console.error('Lỗi khi tải ảnh slideshow:', error));
    });
</script>